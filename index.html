 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Where Homemade Meets Restaurant Style</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap');

        * {
            font-family: 'Tajawal', sans-serif;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dish-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .dish-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .chef-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
        }

        .new-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
        }

        .cart-item {
            transition: background-color 0.3s ease;
        }

        .cart-item:hover {
            background-color: #fef3c7;
        }

        .floating-btn {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-amber-50">
    <!-- Navigation -->
    <nav class="bg-red-600 text-white shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="text-2xl font-bold">joey'skitchen</div>
                <div class="hidden md:flex space-x-4 space-x-reverse">
                    <button onclick="showPage('home')" class="nav-link px-3 py-2 rounded hover:bg-red-700 transition">الرئيسية</button>
                    <button onclick="showPage('menu')" class="nav-link px-3 py-2 rounded hover:bg-red-700 transition">قائمة الطعام</button>
                    <button onclick="showPage('offers')" class="nav-link px-3 py-2 rounded hover:bg-red-700 transition">العروض الخاصة</button>
                    <button onclick="showPage('order')" class="nav-link px-3 py-2 rounded hover:bg-red-700 transition">طلب الطلبات</button>
                    <button onclick="showPage('contact')" class="nav-link px-3 py-2 rounded hover:bg-red-700 transition">اتصل بنا</button>
                    <button onclick="showPage('auth')" class="nav-link px-3 py-2 rounded hover:bg-red-700 transition" id="nav-login-btn">تسجيل الدخول</button>
                    <button onclick="showPage('admin-panel')" class="nav-link px-3 py-2 rounded hover:bg-red-700 transition hidden" id="nav-admin-btn">لوحة التحكم</button>
                    <button onclick="logoutUser()" class="nav-link px-3 py-2 rounded hover:bg-red-700 transition hidden" id="nav-logout-btn">تسجيل الخروج</button>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-white">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden bg-red-600 text-white md:hidden">
        <div class="flex flex-col space-y-2 p-4">
            <button onclick="showPage('home')" class="nav-link py-2 text-right">الرئيسية</button>
            <button onclick="showPage('menu')" class="nav-link py-2 text-right">قائمة الطعام</button>
            <button onclick="showPage('offers')" class="nav-link py-2 text-right">العروض الخاصة</button>
            <button onclick="showPage('order')" class="nav-link py-2 text-right">طلب الطلبات</button>
            <button onclick="showPage('contact')" class="nav-link py-2 text-right">اتصل بنا</button>
            <button onclick="showPage('auth')" class="nav-link py-2 text-right" id="mobile-nav-login-btn">تسجيل الدخول</button>
            <button onclick="showPage('admin-panel')" class="nav-link py-2 text-right hidden" id="mobile-nav-admin-btn">لوحة التحكم</button>
            <button onclick="logoutUser()" class="nav-link py-2 text-right hidden" id="mobile-nav-logout-btn">تسجيل الخروج</button>
        </div>
    </div>

    <!-- Home Page -->
    <div id="home" class="page active">
        <!-- Hero Section -->
        <section class="relative h-96">
            <img src="DALL·E 2024-09-25 15.50.57 - A modern, sleek logo for 'Joey's Kitchen', featuring warm, inviting colors like red, orange, and yellow to evoke hunger and appetite. The design inclu.png" alt="طبق رئيسي من مطبخ جوي يظهر لحم مشوي مع خضروات طازجة وتوابل ذهبية على طبق أبيض أنيق" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                <div class="text-center text-white px-4">
                    <h1 class="text-4xl md:text-6xl font-bold mb-4">Where Homemade Meets Restaurant Style</h1>
                    <p class="text-xl md:text-2xl">At Joy's Kitchen, we serve fresh, delicious meals made with love and expertise</p>
                </div>
            </div>
        </section>

        <!-- Featured Dishes -->
        <section class="py-16 bg-amber-100">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12 text-red-700">الأطباق المميزة</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- Dish 1 -->
                    <div class="dish-card bg-white rounded-lg shadow-md overflow-hidden">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a784c55a-4f6e-4022-b97b-c32137b4cbf6.png" alt="برجر جوي الخاص بلحم البقر الطازج مع جبنة شيدر وخس طماطم على خبز بريوش محمص" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="text-xl font-semibold mb-2">برجر جوي الخاص</h3>
                            <p class="text-gray-600 mb-3">برجر لحم بقري طازج مع جبنة شيدر وخضروات طازجة</p>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-red-600">85 جنية</span>
                                <button onclick="addToCart('برجر جوي الخاص', 85)" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">أضف إلى السلة</button>
                            </div>
                        </div>
                    </div>

                    <!-- Dish 2 -->
                    <div class="dish-card bg-white rounded-lg shadow-md overflow-hidden">
                        <div class="chef-badge">
                            <span class="bg-yellow-500 text-white px-3 py-1 rounded-full text-sm">توصية الشيف</span>
                        </div>
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/655de1fe-8ee0-483c-b47e-0cb0e865bcea.png" alt="معكرونة ألفريدو كريمية مع دجاج مشوي وفطر طازج مغطاة بجبنة بارميزان وريحان" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="text-xl font-semibold mb-2">معكرونة ألفريدو بالدجاج</h3>
                            <p class="text-gray-600 mb-3">معكرونة كريمية مع دجاج مشوي وجبنة بارميزان</p>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-red-600">95 جنية</span>
                                <button onclick="addToCart('معكرونة ألفريدو بالدجاج', 95)" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">أضف إلى السلة</button>
                            </div>
                        </div>
                    </div>

                    <!-- Dish 3 -->
                    <div class="dish-card bg-white rounded-lg shadow-md overflow-hidden">
                        <div class="new-badge">
                            <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm">جديد</span>
                        </div>
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/d2a7cb91-4bf8-40a9-b2bc-50a80e57acdf.png" alt="سلطة سيزر كلاسيكية مع خس روماني طازج وكراوتون محلي الصنع وتوابل خاصة" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="text-xl font-semibold mb-2">سلطة سيزر الكلاسيكية</h3>
                            <p class="text-gray-600 mb-3">خس روماني طازج مع صلصة سيزر الخاصة وكراوتون</p>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-red-600">65 جنية</span>
                                <button onclick="addToCart('سلطة سيزر الكلاسيكية', 65)" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">أضف إلى السلة</button>
                            </div>
                        </div>
                    </div>

                    <!-- Dish 4 -->
                    <div class="dish-card bg-white rounded-lg shadow-md overflow-hidden">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/f3b3be8b-daaa-460a-9a90-517936d474f4.png" alt="تشيز كيك التوت الأحمر الكريمي مع طبقة توت حمراء لامعة وقاعدة بسكوit مقرمشة" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="text-xl font-semibold mb-2">تشيز كيك التوت الأحمر</h3>
                            <p class="text-gray-600 mb-3">تشيز كيك كريمي مع طبقة توت حمراء وحلوة</p>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-red-600">55 جنية</span>
                                <button onclick="addToCart('تشيز كيك التوت الأحمر', 55)" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">أضف إلى السلة</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Daily Specials -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12 text-red-700">عروض اليوم</h2>
                <div class="bg-gradient-to-r from-red-600 to-amber-500 rounded-lg p-8 text-white text-center">
                    <h3 class="text-2xl font-bold mb-4">عرض خاص ليوم الجمعة!</h3>
                    <p class="text-xl mb-4">احصل على خصم 20% على جميع المشاوي عند الطلب لأكثر من شخصين</p>
                    <div class="text-3xl font-bold" id="countdown"></div>
                </div>
            </div>
        </section>
    </div>

    <!-- Menu Page -->
    <div id="menu" class="page">
        <div class="container mx-auto px-4 py-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-red-700">قائمة الطعام</h2>

            <!-- Search and Filter -->
            <div class="mb-8 bg-white p-6 rounded-lg shadow-md">
                <div class="flex flex-col md:flex-row gap-4">
                    <input type="text" id="menu-search" placeholder="ابحث عن طبق..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg">
                    <select id="category-filter" class="px-4 py-2 border border-gray-300 rounded-lg">
                        <option value="all">جميع الفئات</option>
                        <option value="pasta">المكرونات</option>
                        <option value="Sandwiches">السندويتشات</option>
                        <option value="maindish">الاطباق الرئيسية</option>
                        <option value="pies">الفطائر</option>
                        <option value="SignatureDelights">على مزاجك</option>
                    </select>
                    <select id="price-filter" class="px-4 py-2 border border-gray-300 rounded-lg">
                        <option value="all">جميع الأسعار</option>
                        <option value="0-50">أقل من 50 جنية</option>
                        <option value="50-100">50 - 100 جنية</option>
                        <option value="100+">أكثر من 100 جنية</option>
                    </select>
                </div>
            </div>

            <!-- Menu Items Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="menu-items">
                <!-- Menu items will be dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Special Offers Page -->
    <div id="offers" class="page">
        <div class="container mx-auto px-4 py-12">
            <h2 class="text-3xl font-bold text-center mb-12 text-red-700">العروض الخاصة</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Promotion 1 -->
                <div class="bg-gradient-to-br from-red-600 to-amber-500 rounded-lg p-8 text-white">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl font-bold mb-2">عرض عائلتي</h3>
                        <p class="text-lg">خصم 25% على الطلبات العائلية لأكثر من 4 أشخاص</p>
                    </div>
                    <div class="text-center text-2xl font-bold mb-4" id="family-offer-countdown"></div>
                    <button onclick="showPage('order')" class="w-full bg-white text-red-600 py-3 rounded-lg font-bold hover:bg-amber-100 transition">اطلب الآن</button>
                </div>

                <!-- Promotion 2 -->
                <div class="bg-gradient-to-br from-amber-500 to-red-600 rounded-lg p-8 text-white">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl font-bold mb-2">ساعة السعادة</h3>
                        <p class="text-lg">خصم 30% على جميع المشروبات من 4 PM إلى 6 PM</p>
                    </div>
                    <div class="text-center text-2xl font-bold mb-4" id="happy-hour-countdown"></div>
                    <button onclick="showPage('order')" class="w-full bg-white text-red-600 py-3 rounded-lg font-bold hover:bg-amber-100 transition">اطلب الآن</button>
                </div>
            </div>

            <!-- Chef's Recommendations -->
            <div class="mt-16">
                <h3 class="text-2xl font-bold text-center mb-8 text-red-700">توصيات الشيف</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Recommended dishes will be dynamically populated -->
                </div>
            </div>
        </div>
    </div>

    <!-- Order Page -->
    <div id="order" class="page">
        <div class="container mx-auto px-4 py-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-red-700">طلب الطلبات</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Cart -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold mb-6 text-red-700">سلة التسوق</h3>
                    <div id="cart-items" class="space-y-4">
                        <p class="text-center text-gray-500">السلة فارغة</p>
                    </div>
                    <div class="mt-6 pt-4 border-t">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-xl font-semibold">المجموع:</span>
                            <span class="text-2xl font-bold text-red-600" id="total-price">0 جنية</span>
                        </div>
                        <button onclick="checkout()" class="w-full bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700 transition disabled:opacity-50" id="checkout-btn" disabled>إتمام الطلب</button>
                    </div>
                </div>

                <!-- Checkout Form -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold mb-6 text-red-700">معلومات التوصيل</h3>
                    <form id="checkout-form" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">الاسم الكامل</label>
                            <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">رقم الهاتف</label>
                            <input type="tel" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">العنوان</label>
                            <textarea required class="w-full px-4 py-2 border border-gray-300 rounded-lg" rows="3"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">ملاحظات خاصة</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg" rows="2"></textarea>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Page -->
    <div id="contact" class="page">
        <div class="container mx-auto px-4 py-12">
            <h2 class="text-3xl font-bold text-center mb-12 text-red-700">اتصل بنا</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Contact Info -->
                <div>
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <h3 class="text-2xl font-bold mb-6 text-red-700">معلومات الاتصال</h3>

                        <div class="space-y-4">
                            <div class="flex items-center">
                                <i class="fas fa-map-marker-alt text-red-600 text-xl ml-3"></i>
                                <div>
                                    <p class="font-semibold">العنوان:</p>
                                    <p>شارع الجامعة، الدقي، الجيزة</p>
                                </div>
                            </div>

                            <div class="flex items-center">
                                <i class="fas fa-phone text-red-600 text-xl ml-3"></i>
                                <div>
                                    <p class="font-semibold">الهاتف:</p>
                                    <p>01204881867</p>
                                </div>
                            </div>

                            <div class="flex items-center">
                                <i class="fas fa-envelope text-red-600 text-xl ml-3"></i>
                                <div>
                                    <p class="font-semibold">البريد الإلكتروني:</p>
                                    <p>info@joeyskitchen.eg</p>
                                </div>
                            </div>
                        </div>

                        <!-- Social Media -->
                        <div class="mt-8">
                            <h4 class="text-xl font-semibold mb-4">تابعنا على</h4>
                            <div class="flex space-x-4 space-x-reverse">
                                <a href="#" class="text-red-600 hover:text-red-700 text-2xl"><i class="fab fa-facebook"></i></a>
                                <a href="#" class="text-red-600 hover:text-red-700 text-2xl"><i class="fab fa-instagram"></i></a>
                                <a href="#" class="text-red-600 hover:text-red-700 text-2xl"><i class="fab fa-twitter"></i></a>
                                <a href="#" class="text-red-600 hover:text-red-700 text-2xl"><i class="fab fa-whatsapp"></i></a>
                            </div>
                        </div>
                    </div>

                    <!-- Opening Hours -->
                    <div class="bg-white p-8 rounded-lg shadow-md mt-6">
                        <h3 class="text-2xl font-bold mb-6 text-red-700">أوقات العمل</h3>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span>الأحد - الخميس:</span>
                                <span>10:00 ص - 12:00 م</span>
                            </div>
                            <div class="flex justify-between">
                                <span>الجمعة - السبت:</span>
                                <span>12:00 م - 1:00 ص</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Map -->
                <div>
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <h3 class="text-2xl font-bold mb-6 text-red-700">موقعنا</h3>
                        <div class="aspect-w-16 aspect-h-9 bg-gray-200 rounded-lg flex items-center justify-center">
                            <p class="text-gray-500">خريطة جوجل ستظهر هنا</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login/Signup Page -->
    <div id="auth" class="page">
        <div class="container mx-auto px-4 py-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-red-700">تسجيل الدخول / إنشاء حساب</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Login Form -->
                <div class="bg-white p-8 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold mb-6 text-red-700">تسجيل الدخول</h3>
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label for="login-username" class="block text-sm font-medium mb-2">اسم المستخدم</label>
                            <input type="text" id="login-username" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label for="login-password" class="block text-sm font-medium mb-2">كلمة المرور</label>
                            <input type="password" id="login-password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <button type="submit" class="w-full bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700 transition">تسجيل الدخول</button>
                    </form>
                </div>

                <!-- Signup Form -->
                <div class="bg-white p-8 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold mb-6 text-red-700">إنشاء حساب جديد</h3>
                    <form id="signup-form" class="space-y-4">
                        <div>
                            <label for="signup-username" class="block text-sm font-medium mb-2">اسم المستخدم</label>
                            <input type="text" id="signup-username" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label for="signup-password" class="block text-sm font-medium mb-2">كلمة المرور</label>
                            <input type="password" id="signup-password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <button type="submit" class="w-full bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700 transition">إنشاء حساب</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="page">
        <div class="container mx-auto px-4 py-12">
            <h2 class="text-3xl font-bold text-center mb-12 text-red-700">لوحة التحكم</h2>

            <div class="bg-white p-8 rounded-lg shadow-md mb-8">
                <h3 class="text-2xl font-bold mb-6 text-red-700">إدارة القائمة</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Add New Item -->
                    <div>
                        <h4 class="text-xl font-semibold mb-4">إضافة عنصر جديد</h4>
                        <form id="add-menu-item-form" class="space-y-4">
                            <div>
                                <label for="add-item-name" class="block text-sm font-medium mb-2">اسم الطبق</label>
                                <input type="text" id="add-item-name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label for="add-item-category" class="block text-sm font-medium mb-2">الفئة</label>
                                <select id="add-item-category" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                                    <option value="appetizers">مقبلات</option>
                                    <option value="main">أطباق رئيسية</option>
                                    <option value="desserts">حلويات</option>
                                    <option value="drinks">مشروبات</option>
                                </select>
                            </div>
                            <div>
                                <label for="add-item-price" class="block text-sm font-medium mb-2">السعر (جنية)</label>
                                <input type="number" id="add-item-price" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label for="add-item-description" class="block text-sm font-medium mb-2">الوصف</label>
                                <textarea id="add-item-description" class="w-full px-4 py-2 border border-gray-300 rounded-lg" rows="3"></textarea>
                            </div>
                            <div>
                                <label for="add-item-image" class="block text-sm font-medium mb-2">رابط الصورة</label>
                                <input type="text" id="add-item-image" class="w-full px-4 py-2 border border-gray-300 rounded-lg" placeholder="https://example.com/image.png">
                            </div>
                            <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition">إضافة</button>
                        </form>
                    </div>

                    <!-- Existing Menu Items for Editing/Deleting -->
                    <div>
                        <h4 class="text-xl font-semibold mb-4">تعديل / حذف عنصر</h4>
                        <div id="admin-menu-list" class="space-y-4">
                            <!-- Menu items will be loaded here for management -->
                            <p class="text-gray-500">لا توجد عناصر في القائمة.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white p-8 rounded-lg shadow-md mb-8">
                <h3 class="text-2xl font-bold mb-6 text-red-700">إدارة العروض</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Add New Promotion -->
                    <div>
                        <h4 class="text-xl font-semibold mb-4">إضافة عرض جديد</h4>
                        <form id="add-promotion-form" class="space-y-4">
                            <div>
                                <label for="promo-name" class="block text-sm font-medium mb-2">اسم العرض</label>
                                <input type="text" id="promo-name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label for="promo-description" class="block text-sm font-medium mb-2">الوصف</label>
                                <textarea id="promo-description" class="w-full px-4 py-2 border border-gray-300 rounded-lg" rows="2"></textarea>
                            </div>
                            <div>
                                <label for="promo-type" class="block text-sm font-medium mb-2">نوع العرض</label>
                                <select id="promo-type" required class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                                    <option value="discount">خصم</option>
                                    <option value="chef-recommendation">توصية الشيف</option>
                                    <option value="new-item">عنصر جديد</option>
                                </select>
                            </div>
                            <div>
                                <label for="promo-value" class="block text-sm font-medium mb-2">قيمة العرض (نسبة مئوية أو نص)</label>
                                <input type="text" id="promo-value" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label for="promo-end-date" class="block text-sm font-medium mb-2">تاريخ الانتهاء (اختياري)</label>
                                <input type="date" id="promo-end-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition">إضافة عرض</button>
                        </form>
                    </div>
                    <!-- Existing Promotions for Management -->
                    <div>
                        <h4 class="text-xl font-semibold mb-4">العروض الحالية</h4>
                        <div id="admin-promotions-list" class="space-y-4">
                            <p class="text-gray-500">لا توجد عروض حالية.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white p-8 rounded-lg shadow-md">
                <h3 class="text-2xl font-bold mb-6 text-red-700">إدارة الطلبات</h3>
                <div id="admin-orders-list" class="space-y-4">
                    <p class="text-gray-500">لا توجد طلبات حالية.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Order Button -->
    <button onclick="showPage('order')" class="fixed bottom-8 left-8 bg-red-600 text-white p-4 rounded-full shadow-lg floating-btn">
        <i class="fas fa-shopping-cart text-2xl"></i>
        <span class="absolute -top-2 -right-2 bg-yellow-500 text-white rounded-full w-6 h-6 text-sm flex items-center justify-center" id="cart-count">0</span>
    </button>

    <!-- JavaScript -->
    <script>
        // Sample menu data
        const menuData = {
            pasta: [
                { id: 1, name: "مكرونة بشاميل", description: "طبقات من المكرونة المخبوزة مع لحم بقري متبل، مغطاة بصوص بشاميل كريمي وموزاريلا ذهبية لذيذة.", price: 89, image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/2f7fd645-9329-41a2-9a62-ef93631b7bbe.png", alt: "طبقات من المكرونة المخبوزة مع لحم بقري متبل، مغطاة بصوص بشاميل كريمي وموزاريلا ذهبية لذيذة." },
                { id: 2, name: "مكرونة نجرسكو", description: "مكرونة غنية بقطع الدجاج الطرية، ممزوجة بصوص البشاميل الكريمي، ومغطاة بطبقة من الجبن الذائب لمذاق لا يُقاوم.", price: 85, image: "kegrescoo.jpg", alt: "مكرونة غنية بقطع الدجاج الطرية، ممزوجة بصوص البشاميل الكريمي، ومغطاة بطبقة من الجبن الذائب لمذاق لا يُقاوم." },
                { id: 3, name: "مكرونة ماك&شيز", description: "مكرونة ماكاروني مغطاة بمزيج كريمي من جبن الشيدر والموزاريلا والبارميزان، مزينة بقطع استربس مقرمشة لمزيد من اللذة.", price: 97, image: "https://placehold.co/400x300", alt: "مكرونة ماكاروني مغطاة بمزيج كريمي من جبن الشيدر والموزاريلا والبارميزان، مزينة بقطع استربس مقرمشة لمزيد من اللذة." },
                { id: 4, name: "مكرونة بالصلصة و بانية", description: "مكرونة ممزوجة بصلصة الطماطم الحمراء الطازجة، وعليها شرائح دجاج بانيه مقرمشة، وجبة تجمع بين الطراوة والقرمشة.", price: 80, image: "https://placehold.co/400x300", alt: "مكرونة ممزوجة بصلصة الطماطم الحمراء الطازجة، وعليها شرائح دجاج بانيه مقرمشة، وجبة تجمع بين الطراوة والقرمشة."},
                { id: 5, name: "مكرونة بولونيز", description: "سباغيتي غنية بصلصة الطماطم المميزة، ممزوجة مع لحم بقري متبل بخلطة بهارات سرية، لمذاق إيطالي أصيل.", price: 75, image: "https://placehold.co/400x300", alt: "سباغيتي غنية بصلصة الطماطم المميزة، ممزوجة مع لحم بقري متبل بخلطة بهارات سرية، لمذاق إيطالي أصيل."},
            ],
            Sandwiches: [
                { id: 6, name: "فاهيتا", description: "خبز فرنسي محشو بشرائح دجاج متبلة مع خضروات مشوية (فلفل رومي، بصل، وطماطم)، نكهة غنية في كل لقمة.", price: 40, image: "https://placehold.co/400x300", alt: "خبز فرنسي محشو بشرائح دجاج متبلة مع خضروات مشوية (فلفل رومي، بصل، وطماطم)، نكهة غنية في كل لقمة." },
                { id: 7, name: "بانية", description: "خبز فرنسي مقرمش محشو بفيليه دجاج ذهبي اللون، مع جبنة موزاريلا ذائبة لمذاق كريمي رائع.", price: 38, image: "https://placehold.co/400x300", alt: "خبز فرنسي مقرمش محشو بفيليه دجاج ذهبي اللون، مع جبنة موزاريلا ذائبة لمذاق كريمي رائع." },
                { id: 8, name: "كبدة", description: "شرائح كبدة متبلة بتوابل إسكندرانية فريدة، محشوة داخل خبز فرنسي طازج، ومشوية للون ذهبي شهي", price: 17, image: "https://placehold.co/400x300", alt: "شرائح كبدة متبلة بتوابل إسكندرانية فريدة، محشوة داخل خبز فرنسي طازج، ومشوية للون ذهبي شهي" },
                { id: 9, name: "كفتة", description: " خبز فرنسي محشو بكفتة لحم متبلة بعناية، مشوية  لتجمع بين الطراوة والطعم ا المميز، مع طحينة وخضروات طازجة.", price: 43, image: "https://placehold.co/400x300", alt: " خبز فرنسي محشو بكفتة لحم متبلة بعناية، مشوية  لتجمع بين الطراوة والطعم ا المميز، مع طحينة وخضروات طازجة." },
                { id: 10 , name: "بطاطس", description: "بطاطس مقرمشة ذهبية اللون، متبلة بشكل مثالي ومقدمة ساخنة للحصول على أقصى قدر من القرمشة", price: 15, image: "https://placehold.co/400x300", alt: "بطاطس مقرمشة ذهبية اللون، متبلة بشكل مثالي ومقدمة ساخنة للحصول على أقصى قدر من القرمشة" }
            ],
            maindish: [
                { id: 11, name: "فراخ مشوية", description: "دجاج متبل بمزيج خاص من الأعشاب والتوابل، مشوي حتى يصبح طريًا من الداخل وذهبيًا من الخارج، يُقدم مع أرز بسمتي وطحينة.", price: 85, image: "https://placehold.co/400x300", alt: "دجاج متبل بمزيج خاص من الأعشاب والتوابل، مشوي حتى يصبح طريًا من الداخل وذهبيًا من الخارج، يُقدم مع أرز بسمتي وطحينة." },
                { id: 12, name: "كفتة مشوية", description: " كفتة طرية مشوية ، تُقدم مع أرز بسمتي وطحينة وخبز طازج", price: 95, image: "https://placehold.co/400x300", alt: " كفتة طرية مشوية ، تُقدم مع أرز بسمتي وطحينة وخبز طازج" },
                { id: 13, name: "ريزو", description: " أرز ريزو متبل بتوابل خاصة علية صوص مميز وقطع استربس مقرمشة، وجبة متكاملة لعشاق الطعم الغني والقرمشة.", price: 79, image: "https://placehold.co/400x300", alt: "رز ريزو متبل بتوابل خاصة علية صوص مميز وقطع استربس مقرمشة، وجبة متكاملة لعشاق الطعم الغني والقرمشة."}
            ],
            pies: [
                { id: 14, name: "فطيرة فراخ", description: "فطيرة شرقي مخبوزة بحشوة من الدجاج المتبل، مع خضروات طازجة وجبن موزاريلا ذائب، للحصول على طعم غني ومقرمش", price: 80, image: "https://placehold.co/400x300", alt: "فطيرة شرقي مخبوزة بحشوة من الدجاج المتبل، مع خضروات طازجة وجبن موزاريلا ذائب، للحصول على طعم غني ومقرمش" },
                { id: 15, name: "مشكل جبن", description: "فطيرة شرقي محشوة بمزيج رائع من الجبن الشيدر، الموزاريلا، والتركي مع قطع المثلثات، مخبوزة حتى تصبح مقرمشة من الخارج وكريمية من الداخل.", price: 73, image: "https://placehold.co/400x300", alt: "فطيرة شرقي محشوة بمزيج رائع من الجبن الشيدر، الموزاريلا، والتركي مع قطع المثلثات، مخبوزة حتى تصبح مقرمشة من الخارج وكريمية من الداخل." }
            ],
             SignatureDelights: [
                { id: 16, name: "بوب فيستا", description: "قطع دجاج بوب كورن مقرمشة، مع بطاطس ذهبية وفلفل حلو ملون، عليه صوص ريزو المميز، تجربة مليانة طعم وقوام مختلف.", price: 80, image: "https://placehold.co/400x300", alt: "قطع دجاج بوب كورن مقرمشة، مع بطاطس ذهبية وفلفل حلو ملون، عليه صوص ريزو المميز، تجربة مليانة طعم وقوام مختلف" },
                { id: 17, name: "حواوشي", description: "عيش بلدي محشو بلحم بقري متبل، مشوي حتى يأخذ طعم الشواء الأصيل.اضافة جبنة موزاريلا 8ج", price: 25, image: "https://placehold.co/400x300", alt: "عيش بلدي محشو بلحم بقري متبل، مشوي حتى يأخذ طعم الشواء الأصيل.اضافة جبنة موزاريلا 8ج " }
            ]
        };
 
        let cart = [];
        let currentPage = 'home';
        let currentUser = null; // Stores logged-in user object { username, role }

        // New: Store users, orders, and promotions in localStorage
        let users = [];
        let orders = [];
        let promotions = [];

        // Initialize the application
        function init() {
            loadDataFromLocalStorage();
            populateMenu();
            setupEventListeners();
            startCountdowns();
            updateCartUI();
            updateNavigationVisibility();
            renderAdminMenu();
            renderAdminPromotions();
            renderAdminOrders();
            showPage('home'); // Ensure home page is shown on load
        }

        function loadDataFromLocalStorage() {
            const storedMenuData = localStorage.getItem('menuData');
            if (storedMenuData) {
                const parsedStoredMenu = JSON.parse(storedMenuData);
                for (const category in parsedStoredMenu) {
                    if (menuData.hasOwnProperty(category)) {
                        menuData[category] = parsedStoredMenu[category];
                    } else {
                        menuData[category] = parsedStoredMenu[category];
                    }
                }
            }
            users = JSON.parse(localStorage.getItem('users')) || [];
            orders = JSON.parse(localStorage.getItem('orders')) || [];
            promotions = JSON.parse(localStorage.getItem('promotions')) || [];

            // Ensure admin user exists (for testing)
            if (!users.some(user => user.username === 'admin')) {
                users.push({ username: 'admin', password: 'adminpassword', role: 'admin' });
                localStorage.setItem('users', JSON.stringify(users));
            }

            // Check for logged-in user
            const storedUser = localStorage.getItem('currentUser');
            if (storedUser && storedUser !== 'null') { // Check for 'null' string as well
                currentUser = JSON.parse(storedUser);
            }
        }

        function saveDataToLocalStorage() {
            localStorage.setItem('menuData', JSON.stringify(menuData));
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('orders', JSON.stringify(orders));
            localStorage.setItem('promotions', JSON.stringify(promotions));
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
        }

        // Show specific page
        function showPage(pageId) {
            // Prevent access to admin panel if not admin
            if (pageId === 'admin-panel' && (!currentUser || currentUser.role !== 'admin')) {
                showNotification('ليس لديك صلاحية الوصول إلى لوحة التحكم.', 'red');
                return;
            }
            // Prevent access to order page if not logged in (optional, but good for tracking)
            if (pageId === 'order' && !currentUser) {
                showNotification('يرجى تسجيل الدخول لتقديم طلب.', 'red');
                showPage('auth'); // Redirect to login page
                return;
            }

            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('bg-red-700');
            });

            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;

            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.textContent.trim() === getPageName(pageId)) {
                    link.classList.add('bg-red-700');
                }
            });

            // Re-render admin sections if admin panel is shown
            if (pageId === 'admin-panel') {
                renderAdminMenu();
                renderAdminPromotions();
                renderAdminOrders();
            }
        }

        function getPageName(pageId) {
            const pages = {
                'home': 'الرئيسية',
                'menu': 'قائمة الطعام',
                'offers': 'العروض الخاصة',
                'order': 'طلب الطلبات',
                'contact': 'اتصل بنا',
                'auth': 'تسجيل الدخول',
                'admin-panel': 'لوحة التحكم'
            };
            return pages[pageId];
        }

        // Populate menu items
        function populateMenu() {
            const menuContainer = document.getElementById('menu-items');
            let menuHTML = '';

            Object.keys(menuData).forEach(category => {
                menuData[category].forEach(item => {
                    menuHTML += `
                        <div class="dish-card bg-white rounded-lg shadow-md overflow-hidden" data-category="${category}" data-price="${item.price}">
                            <img src="${item.image}" alt="${item.alt}" class="w-full h-48 object-cover">
                            <div class="p-4">
                                <h3 class="text-xl font-semibold mb-2">${item.name}</h3>
                                <p class="text-gray-600 mb-3">${item.description}</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-2xl font-bold text-red-600">${item.price} جنية</span>
                                    <button onclick="addToCart('${item.name}', ${item.price})" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">أضف إلى السلة</button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            });

            menuContainer.innerHTML = menuHTML;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Mobile menu
            document.getElementById('mobile-menu-btn').addEventListener('click', function() {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            });

            // Search and filter
            document.getElementById('menu-search').addEventListener('input', filterMenu);
            document.getElementById('category-filter').addEventListener('change', filterMenu);
            document.getElementById('price-filter').addEventListener('change', filterMenu);

            // Auth forms
            document.getElementById('signup-form').addEventListener('submit', function(event) {
                event.preventDefault();
                const username = document.getElementById('signup-username').value;
                const password = document.getElementById('signup-password').value;
                registerUser(username, password);
                this.reset();
            });

            document.getElementById('login-form').addEventListener('submit', function(event) {
                event.preventDefault();
                const username = document.getElementById('login-username').value;
                const password = document.getElementById('login-password').value;
                loginUser(username, password);
                this.reset();
            });

            // Admin forms
            document.getElementById('add-menu-item-form').addEventListener('submit', function(event) {
                event.preventDefault();
                const name = document.getElementById('add-item-name').value;
                const category = document.getElementById('add-item-category').value;
                const price = document.getElementById('add-item-price').value;
                const description = document.getElementById('add-item-description').value;
                const image = document.getElementById('add-item-image').value;
                addMenuItem(name, category, price, description, image);
                this.reset();
            });

            document.getElementById('add-promotion-form').addEventListener('submit', function(event) {
                event.preventDefault();
                const name = document.getElementById('promo-name').value;
                const description = document.getElementById('promo-description').value;
                const type = document.getElementById('promo-type').value;
                const value = document.getElementById('promo-value').value;
                const endDate = document.getElementById('promo-end-date').value;
                addPromotion(name, description, type, value, endDate);
                this.reset();
            });
        }

        // Filter menu items
        function filterMenu() {
            const searchTerm = document.getElementById('menu-search').value.toLowerCase();
            const category = document.getElementById('category-filter').value;
            const priceRange = document.getElementById('price-filter').value;

            document.querySelectorAll('.dish-card').forEach(card => {
                const itemCategory = card.getAttribute('data-category');
                const itemPrice = parseInt(card.getAttribute('data-price'));
                const itemName = card.querySelector('h3').textContent.toLowerCase();

                let matchesSearch = itemName.includes(searchTerm);
                let matchesCategory = category === 'all' || itemCategory === category;
                let matchesPrice = true;

                if (priceRange !== 'all') {
                    const [min, max] = priceRange.split('-').map(Number);
                    if (priceRange === '100+') {
                        matchesPrice = itemPrice > 100;
                    } else {
                        matchesPrice = itemPrice >= min && itemPrice <= max;
                    }
                }

                card.style.display = (matchesSearch && matchesCategory && matchesPrice) ? 'block' : 'none';
            });
        }

        // Add item to cart
        function addToCart(name, price) {
            const existingItem = cart.find(item => item.name === name);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ name, price, quantity: 1 });
            }

            updateCartUI();
            showNotification(`تم إضافة ${name} إلى السلة`);
        }

        // Remove item from cart
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        // Update quantity
        function updateQuantity(index, change) {
            cart[index].quantity += change;

            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }

            updateCartUI();
        }

        // Update cart UI
        function updateCartUI() {
            const cartItems = document.getElementById('cart-items');
            const totalPrice = document.getElementById('total-price');
            const cartCount = document.getElementById('cart-count');
            const checkoutBtn = document.getElementById('checkout-btn');

            let total = 0;
            let itemsHTML = '';

            if (cart.length === 0) {
                itemsHTML = '<p class="text-center text-gray-500">السلة فارغة</p>';
                checkoutBtn.disabled = true;
            } else {
                cart.forEach((item, index) => {
                    total += item.price * item.quantity;
                    itemsHTML += `
                        <div class="cart-item bg-amber-50 p-4 rounded-lg flex justify-between items-center">
                            <div>
                                <h4 class="font-semibold">${item.name}</h4>
                                <p class="text-red-600">${item.price} جنية</p>
                            </div>
                            <div class="flex items-center space-x-2 space-x-reverse">
                                <button onclick="updateQuantity(${index}, -1)" class="w-8 h-8 bg-red-600 text-white rounded">-</button>
                                <span class="w-8 text-center">${item.quantity}</span>
                                <button onclick="updateQuantity(${index}, 1)" class="w-8 h-8 bg-red-600 text-white rounded">+</button>
                                <button onclick="removeFromCart(${index})" class="text-red-600 hover:text-red-700">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                });
                checkoutBtn.disabled = false;
            }

            cartItems.innerHTML = itemsHTML;
            totalPrice.textContent = `${total} جنية`;
            cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
        }

        // Checkout process
        function checkout() {
            const form = document.getElementById('checkout-form');
            if (!form.checkValidity()) {
                alert('يرجى ملء جميع الحقول المطلوبة');
                return;
            }

            if (cart.length === 0) {
                showNotification('سلة التسوق فارغة!', 'red');
                return;
            }

            const customerName = form.querySelector('input[type="text"]').value;
            const phoneNumber = form.querySelector('input[type="tel"]').value;
            const address = form.querySelector('textarea').value;
            const notes = form.querySelectorAll('textarea')[1].value; // Assuming the second textarea is notes

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const deliveryFee = 15; // Example delivery fee
            const grandTotal = total + deliveryFee;

            const newOrder = {
                id: Date.now(), // Simple unique ID
                customer: currentUser ? currentUser.username : 'Guest', // Track customer
                customerName: customerName,
                phoneNumber: phoneNumber,
                address: address,
                items: JSON.parse(JSON.stringify(cart)), // Deep copy cart items
                notes: notes,
                subtotal: total,
                deliveryFee: deliveryFee,
                grandTotal: grandTotal,
                status: 'pending', // Initial status
                orderDate: new Date().toLocaleString()
            };

            orders.push(newOrder);
            saveDataToLocalStorage();
            showNotification('شكراً لطلبك! سيتم توصيل طلبك خلال 30-45 دقيقة.', 'green');
            cart = []; // Clear cart after checkout
            updateCartUI();
            form.reset(); // Clear form
            showPage('home'); // Redirect to home
            renderAdminOrders(); // Update admin orders list
        }

        // Countdown timers
        function startCountdowns() {
            // Main countdown (3 days)
            const mainEndDate = new Date();
            mainEndDate.setDate(mainEndDate.getDate() + 3);

            setInterval(() => {
                updateCountdown('countdown', mainEndDate);
            }, 1000);

            // Family offer countdown (7 days)
            const familyEndDate = new Date();
            familyEndDate.setDate(familyEndDate.getDate() + 7);

            setInterval(() => {
                updateCountdown('family-offer-countdown', familyEndDate);
            }, 1000);

            // Happy hour countdown (next 4 PM)
            const happyHourEndDate = new Date();
            if (happyHourEndDate.getHours() >= 16) {
                happyHourEndDate.setDate(happyHourEndDate.getDate() + 1);
            }
            happyHourEndDate.setHours(16, 0, 0, 0);

            setInterval(() => {
                updateCountdown('happy-hour-countdown', happyHourEndDate);
            }, 1000);
        }

        function updateCountdown(elementId, endDate) {
            const now = new Date();
            const distance = endDate - now;

            if (distance < 0) {
                document.getElementById(elementId).textContent = "انتهى العرض";
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById(elementId).textContent = `${days} يوم ${hours} ساعة ${minutes} دقيقة ${seconds} ثانية`;
        }

        // Show notification
        function showNotification(message, type = 'green') {
            const notification = document.createElement('div');
            let bgColorClass = 'bg-green-500';
            if (type === 'red') {
                bgColorClass = 'bg-red-500';
            } else if (type === 'blue') {
                bgColorClass = 'bg-blue-500';
            }

            notification.className = `fixed top-4 right-4 ${bgColorClass} text-white px-6 py-3 rounded-lg shadow-lg z-50`;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // User Authentication Functions
        function registerUser(username, password) {
            if (users.some(user => user.username === username)) {
                showNotification('اسم المستخدم موجود بالفعل.', 'red');
                return false;
            }
            users.push({ username, password, role: 'customer' });
            saveDataToLocalStorage();
            showNotification('تم إنشاء الحساب بنجاح! يمكنك الآن تسجيل الدخول.', 'green');
            return true;
        }

        function loginUser(username, password) {
            const user = users.find(u => u.username === username && u.password === password);
            if (user) {
                currentUser = user;
                saveDataToLocalStorage();
                showNotification(`مرحباً بك، ${user.username}!`, 'green');
                updateNavigationVisibility();
                showPage('home'); // Redirect to home after login
                return true;
            } else {
                showNotification('اسم المستخدم أو كلمة المرور غير صحيحة.', 'red');
                return false;
            }
        }

        function logoutUser() {
            currentUser = null;
            saveDataToLocalStorage();
            showNotification('تم تسجيل الخروج بنجاح.', 'green');
            updateNavigationVisibility();
            showPage('home'); // Redirect to home after logout
        }

        function updateNavigationVisibility() {
            const navLoginBtn = document.getElementById('nav-login-btn');
            const navLogoutBtn = document.getElementById('nav-logout-btn');
            const navAdminBtn = document.getElementById('nav-admin-btn');

            // Mobile menu buttons
            const mobileNavLoginBtn = document.getElementById('mobile-nav-login-btn');
            const mobileNavLogoutBtn = document.getElementById('mobile-nav-logout-btn');
            const mobileNavAdminBtn = document.getElementById('mobile-nav-admin-btn');


            if (currentUser) {
                navLoginBtn.classList.add('hidden');
                navLogoutBtn.classList.remove('hidden');
                if (mobileNavLoginBtn) mobileNavLoginBtn.classList.add('hidden');
                if (mobileNavLogoutBtn) mobileNavLogoutBtn.classList.remove('hidden');

                if (currentUser.role === 'admin') {
                    navAdminBtn.classList.remove('hidden');
                    if (mobileNavAdminBtn) mobileNavAdminBtn.classList.remove('hidden');
                } else {
                    navAdminBtn.classList.add('hidden');
                    if (mobileNavAdminBtn) mobileNavAdminBtn.classList.add('hidden');
                }
            } else {
                navLoginBtn.classList.remove('hidden');
                navLogoutBtn.classList.add('hidden');
                navAdminBtn.classList.add('hidden');
                if (mobileNavLoginBtn) mobileNavLoginBtn.classList.remove('hidden');
                if (mobileNavLogoutBtn) mobileNavLogoutBtn.classList.add('hidden');
                if (mobileNavAdminBtn) mobileNavAdminBtn.classList.add('hidden');
            }
        }

        // Admin Panel Functions (Menu Management)
        function renderAdminMenu() {
            const adminMenuList = document.getElementById('admin-menu-list');
            let menuHTML = '';
            let itemIdCounter = 0; // To ensure unique IDs for admin panel elements

            Object.keys(menuData).forEach(category => {
                menuData[category].forEach(item => {
                    const uniqueId = `admin-item-${itemIdCounter++}`;
                    menuHTML += `
                        <div class="bg-amber-50 p-4 rounded-lg shadow-sm flex justify-between items-center">
                            <div>
                                <h4 class="font-semibold">${item.name} (${item.price} جنية)</h4>
                                <p class="text-gray-600 text-sm">${item.description}</p>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="editMenuItemPrompt('${item.name}', '${category}')" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition">تعديل</button>
                                <button onclick="deleteMenuItem('${item.name}', '${category}')" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition">حذف</button>
                            </div>
                        </div>
                    `;
                });
            });

            adminMenuList.innerHTML = menuHTML || '<p class="text-gray-500">لا توجد عناصر في القائمة.</p>';
        }

        function addMenuItem(name, category, price, description, image) {
            // Simple check for existing item name within the category
            if (!menuData[category]) { // Create category if it doesn't exist
                menuData[category] = [];
            }
            if (menuData[category].some(item => item.name === name)) {
                showNotification(`الطبق "${name}" موجود بالفعل في فئة "${category}".`, 'red');
                return;
            }
            const newItem = {
                id: Date.now(), // Simple ID
                name: name,
                description: description,
                price: parseFloat(price),
                image: image || 'https://placehold.co/400x300', // Default image
                alt: name // Simple alt text
            };
            menuData[category].push(newItem);
            saveDataToLocalStorage();
            populateMenu(); // Update customer menu
            renderAdminMenu(); // Update admin menu list
            showNotification(`تم إضافة "${name}" بنجاح.`, 'green');
        }

        function editMenuItemPrompt(itemName, itemCategory) {
            const item = menuData[itemCategory].find(i => i.name === itemName);
            if (!item) return;

            const newName = prompt(`تعديل اسم الطبق (${item.name}):`, item.name);
            if (newName === null) return; // User cancelled

            const newDescription = prompt(`تعديل وصف الطبق (${item.description}):`, item.description);
            if (newDescription === null) return;

            const newPrice = prompt(`تعديل سعر الطبق (${item.price}):`, item.price);
            if (newPrice === null || isNaN(parseFloat(newPrice))) {
                showNotification('السعر غير صالح.', 'red');
                return;
            }

            const newImage = prompt(`تعديل رابط الصورة (${item.image}):`, item.image);
            if (newImage === null) return;

            // Find index and update
            const index = menuData[itemCategory].findIndex(i => i.name === itemName);
            if (index !== -1) {
                menuData[itemCategory][index].name = newName;
                menuData[itemCategory][index].description = newDescription;
                menuData[itemCategory][index].price = parseFloat(newPrice);
                menuData[itemCategory][index].image = newImage;
                menuData[itemCategory][index].alt = newName; // Update alt text
                saveDataToLocalStorage();
                populateMenu();
                renderAdminMenu();
                showNotification(`تم تحديث "${newName}" بنجاح.`, 'green');
            }
        }

        function deleteMenuItem(itemName, itemCategory) {
            if (confirm(`هل أنت متأكد أنك تريد حذف "${itemName}" من فئة "${itemCategory}"؟`)) {
                menuData[itemCategory] = menuData[itemCategory].filter(item => item.name !== itemName);
                saveDataToLocalStorage();
                populateMenu();
                renderAdminMenu();
                showNotification(`تم حذف "${itemName}" بنجاح.`, 'green');
            }
        }

        // Admin Panel Functions (Promotions Management)
        function renderAdminPromotions() {
            const adminPromotionsList = document.getElementById('admin-promotions-list');
            let promoHTML = '';

            if (promotions.length === 0) {
                adminPromotionsList.innerHTML = '<p class="text-gray-500">لا توجد عروض حالية.</p>';
                return;
            }

            promotions.forEach(promo => {
                promoHTML += `
                    <div class="bg-amber-50 p-4 rounded-lg shadow-sm flex justify-between items-center">
                        <div>
                            <h4 class="font-semibold">${promo.name} (${promo.type})</h4>
                            <p class="text-gray-600 text-sm">${promo.description || ''}</p>
                            ${promo.value ? `<p class="text-gray-600 text-sm">القيمة: ${promo.value}</p>` : ''}
                            ${promo.endDate ? `<p class="text-gray-600 text-sm">ينتهي في: ${new Date(promo.endDate).toLocaleDateString()}</p>` : ''}
                        </div>
                        <div class="flex space-x-2 space-x-reverse">
                            <button onclick="editPromotionPrompt(${promo.id})" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition">تعديل</button>
                            <button onclick="deletePromotion(${promo.id})" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition">حذف</button>
                        </div>
                    </div>
                `;
            });
            adminPromotionsList.innerHTML = promoHTML;
        }

        function addPromotion(name, description, type, value, endDate) {
            const newPromo = {
                id: Date.now(),
                name,
                description,
                type,
                value,
                endDate: endDate ? new Date(endDate).toISOString() : null // Store as ISO string
            };
            promotions.push(newPromo);
            saveDataToLocalStorage();
            renderAdminPromotions();
            showNotification(`تم إضافة العرض "${name}" بنجاح.`, 'green');
        }

        function editPromotionPrompt(promoId) {
            const promo = promotions.find(p => p.id === promoId);
            if (!promo) return;

            const newName = prompt(`تعديل اسم العرض (${promo.name}):`, promo.name);
            if (newName === null) return;

            const newDescription = prompt(`تعديل وصف العرض (${promo.description || ''}):`, promo.description || '');
            if (newDescription === null) return;

            const newValue = prompt(`تعديل قيمة العرض (${promo.value || ''}):`, promo.value || '');
            if (newValue === null) return;

            const newEndDate = prompt(`تعديل تاريخ الانتهاء (YYYY-MM-DD) (${promo.endDate ? new Date(promo.endDate).toISOString().split('T')[0] : ''}):`, promo.endDate ? new Date(promo.endDate).toISOString().split('T')[0] : '');
            if (newEndDate === null) return;

            const index = promotions.findIndex(p => p.id === promoId);
            if (index !== -1) {
                promotions[index].name = newName;
                promotions[index].description = newDescription;
                promotions[index].value = newValue;
                promotions[index].endDate = newEndDate ? new Date(newEndDate).toISOString() : null;
                saveDataToLocalStorage();
                renderAdminPromotions();
                showNotification(`تم تحديث العرض "${newName}" بنجاح.`, 'green');
            }
        }

        function deletePromotion(promoId) {
            if (confirm('هل أنت متأكد أنك تريد حذف هذا العرض؟')) {
                promotions = promotions.filter(promo => promo.id !== promoId);
                saveDataToLocalStorage();
                renderAdminPromotions();
                showNotification('تم حذف العرض بنجاح.', 'green');
            }
        }

        // Admin Panel Functions (Orders Management)
        function renderAdminOrders() {
            const adminOrdersList = document.getElementById('admin-orders-list');
            let ordersHTML = '';

            if (orders.length === 0) {
                adminOrdersList.innerHTML = '<p class="text-gray-500">لا توجد طلبات حالية.</p>';
                return;
            }

            orders.sort((a, b) => b.id - a.id); // Sort by latest first

            orders.forEach(order => {
                const itemsDetails = order.items.map(item => `${item.name} (x${item.quantity})`).join(', ');
                ordersHTML += `
                    <div class="bg-amber-50 p-4 rounded-lg shadow-md mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-bold text-lg">طلب #${order.id} - ${order.customerName} (${order.customer})</h4>
                            <span class="px-3 py-1 rounded-full text-sm font-semibold ${getOrderStatusClass(order.status)}">${getOrderStatusText(order.status)}</span>
                        </div>
                        <p class="text-gray-700"><strong>التاريخ:</strong> ${order.orderDate}</p>
                        <p class="text-gray-700"><strong>الهاتف:</strong> ${order.phoneNumber}</p>
                        <p class="text-gray-700"><strong>العنوان:</strong> ${order.address}</p>
                        <p class="text-gray-700"><strong>الطلبات:</strong> ${itemsDetails}</p>
                        ${order.notes ? `<p class="text-gray-700"><strong>ملاحظات:</strong> ${order.notes}</p>` : ''}
                        <p class="text-gray-700"><strong>المجموع الفرعي:</strong> ${order.subtotal} جنية</p>
                        <p class="text-gray-700"><strong>رسوم التوصيل:</strong> ${order.deliveryFee} جنية</p>
                        <p class="text-red-600 font-bold text-xl"><strong>الإجمالي:</strong> ${order.grandTotal} جنية</p>
                        <div class="mt-4 flex space-x-2 space-x-reverse">
                            <select onchange="updateOrderStatus(${order.id}, this.value)" class="px-3 py-1 border rounded">
                                <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>معلق</option>
                                <option value="preparing" ${order.status === 'preparing' ? 'selected' : ''}>قيد التحضير</option>
                                <option value="delivered" ${order.status === 'delivered' ? 'selected' : ''}>تم التوصيل</option>
                                <option value="cancelled" ${order.status === 'cancelled' ? 'selected' : ''}>ملغي</option>
                            </select>
                            <button onclick="deleteOrder(${order.id})" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition">حذف الطلب</button>
                        </div>
                    </div>
                `;
            });
            adminOrdersList.innerHTML = ordersHTML;
        }

        function updateOrderStatus(orderId, newStatus) {
            const orderIndex = orders.findIndex(order => order.id === orderId);
            if (orderIndex !== -1) {
                orders[orderIndex].status = newStatus;
                saveDataToLocalStorage();
                renderAdminOrders();
                showNotification(`تم تحديث حالة الطلب #${orderId} إلى "${getOrderStatusText(newStatus)}".`, 'green');
            }
        }

        function deleteOrder(orderId) {
            if (confirm(`هل أنت متأكد أنك تريد حذف الطلب #${orderId}؟`)) {
                orders = orders.filter(order => order.id !== orderId);
                saveDataToLocalStorage();
                renderAdminOrders();
                showNotification(`تم حذف الطلب #${orderId} بنجاح.`, 'green');
            }
        }

        function getOrderStatusClass(status) {
            switch (status) {
                case 'pending': return 'bg-yellow-200 text-yellow-800';
                case 'preparing': return 'bg-blue-200 text-blue-800';
                case 'delivered': return 'bg-green-200 text-green-800';
                case 'cancelled': return 'bg-red-200 text-red-800';
                default: return 'bg-gray-200 text-gray-800';
            }
        }

        function getOrderStatusText(status) {
            switch (status) {
                case 'pending': return 'معلق';
                case 'preparing': return 'قيد التحضير';
                case 'delivered': return 'تم التوصيل';
                case 'cancelled': return 'ملغي';
                default: return 'غير معروف';
            }
        }

        // Initialize when page loads
        window.onload = init;
    </script>
</body>
</html>
